# -*- coding: utf-8 -*-
"""
"""
import time
import logging
from datetime import datetime

import requests

from flask import jsonify
from flask import current_app


def get_log(e=None):
    return logging.getLogger("{0}.{1}".format(__name__, e) if e else __name__)


def to_datetime(date, hour):
    """Convert the date and hour to datetime.
    """
    return datetime.strptime("{}{}".format(date, hour), '%Y%m%d%H%M')


def printable(date_time):
    """Helper for printing the given datetime instance.
    """
    return date_time.strftime('%Y-%m-%d %H:%M')


def from_timestamp(timestamp):
    """
    """
    return datetime.fromtimestamp(int(timestamp))


def forecast_data(city):
    """Recover the city's forecast for the next 5 days at three hour intervals.

    This uses request's get to recover the listing for the given city.

    :param city: The city name e.g. london.

    :returns: A list of data points for the city.

    """
    response = [{u'clouds': {u'all': 68}, u'rain': {u'3h': 0.02}, u'sys': {u'pod': u'd'}, u'dt_txt': u'2017-10-18 15:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10d', u'description': u'light rain'}], u'dt': 1508338800, u'main': {u'temp_kf': 0.24, u'temp': 290.44, u'grnd_level': 1015.55, u'temp_max': 290.44, u'sea_level': 1023.04, u'humidity': 100, u'pressure': 1015.55, u'temp_min': 290.191}, u'wind': {u'speed': 1.87, u'deg': 168.003}}, {u'clouds': {u'all': 88}, u'rain': {u'3h': 0.095}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-18 18:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10n', u'description': u'light rain'}], u'dt': 1508349600, u'main': {u'temp_kf': 0.16, u'temp': 289.21, u'grnd_level': 1015.88, u'temp_max': 289.21, u'sea_level': 1023.41, u'humidity': 98, u'pressure': 1015.88, u'temp_min': 289.052}, u'wind': {u'speed': 2.26, u'deg': 181}}, {u'clouds': {u'all': 68}, u'rain': {u'3h': 0.015000000000001}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-18 21:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10n', u'description': u'light rain'}], u'dt': 1508360400, u'main': {u'temp_kf': 0.08, u'temp': 287.62, u'grnd_level': 1016.02, u'temp_max': 287.62, u'sea_level': 1023.48, u'humidity': 99, u'pressure': 1016.02, u'temp_min': 287.535}, u'wind': {u'speed': 2.31, u'deg': 189.505}}, {u'clouds': {u'all': 32}, u'rain': {}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-19 00:00:00', u'weather': [{u'main': u'Clouds', u'id': 802, u'icon': u'03n', u'description': u'scattered clouds'}], u'dt': 1508371200, u'main': {u'temp_kf': 0, u'temp': 286.383, u'grnd_level': 1015.6, u'temp_max': 286.383, u'sea_level': 1023.15, u'humidity': 99, u'pressure': 1015.6, u'temp_min': 286.383}, u'wind': {u'speed': 1.77, u'deg': 197.502}}, {u'clouds': {u'all': 68}, u'rain': {u'3h': 0.0099999999999998}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-19 03:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10n', u'description': u'light rain'}], u'dt': 1508382000, u'main': {u'temp_kf': 0, u'temp': 284.517, u'grnd_level': 1014.43, u'temp_max': 284.517, u'sea_level': 1021.99, u'humidity': 100, u'pressure': 1014.43, u'temp_min': 284.517}, u'wind': {u'speed': 1.22, u'deg': 119.001}}, {u'clouds': {u'all': 92}, u'rain': {u'3h': 0.11}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-19 06:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10n', u'description': u'light rain'}], u'dt': 1508392800, u'main': {u'temp_kf': 0, u'temp': 285.978, u'grnd_level': 1013.64, u'temp_max': 285.978, u'sea_level': 1021.02, u'humidity': 100, u'pressure': 1013.64, u'temp_min': 285.978}, u'wind': {u'speed': 1.56, u'deg': 91.5016}}, {u'clouds': {u'all': 88}, u'rain': {u'3h': 0.16}, u'sys': {u'pod': u'd'}, u'dt_txt': u'2017-10-19 09:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10d', u'description': u'light rain'}], u'dt': 1508403600, u'main': {u'temp_kf': 0, u'temp': 287.436, u'grnd_level': 1011.81, u'temp_max': 287.436, u'sea_level': 1019.43, u'humidity': 97, u'pressure': 1011.81, u'temp_min': 287.436}, u'wind': {u'speed': 3.36, u'deg': 113.503}}, {u'clouds': {u'all': 56}, u'rain': {u'3h': 0.015000000000001}, u'sys': {u'pod': u'd'}, u'dt_txt': u'2017-10-19 12:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10d', u'description': u'light rain'}], u'dt': 1508414400, u'main': {u'temp_kf': 0, u'temp': 289.97, u'grnd_level': 1010.61, u'temp_max': 289.97, u'sea_level': 1018.07, u'humidity': 97, u'pressure': 1010.61, u'temp_min': 289.97}, u'wind': {u'speed': 4.06, u'deg': 168.502}}, {u'clouds': {u'all': 44}, u'rain': {u'3h': 0.0099999999999998}, u'sys': {u'pod': u'd'}, u'dt_txt': u'2017-10-19 15:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10d', u'description': u'light rain'}], u'dt': 1508425200, u'main': {u'temp_kf': 0, u'temp': 289.777, u'grnd_level': 1009.32, u'temp_max': 289.777, u'sea_level': 1016.79, u'humidity': 88, u'pressure': 1009.32, u'temp_min': 289.777}, u'wind': {u'speed': 4.92, u'deg': 189.504}}, {u'clouds': {u'all': 88}, u'rain': {u'3h': 0.1}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-19 18:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10n', u'description': u'light rain'}], u'dt': 1508436000, u'main': {u'temp_kf': 0, u'temp': 288.381, u'grnd_level': 1009.63, u'temp_max': 288.381, u'sea_level': 1017.04, u'humidity': 86, u'pressure': 1009.63, u'temp_min': 288.381}, u'wind': {u'speed': 4.26, u'deg': 187.505}}, {u'clouds': {u'all': 92}, u'rain': {}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-19 21:00:00', u'weather': [{u'main': u'Clouds', u'id': 804, u'icon': u'04n', u'description': u'overcast clouds'}], u'dt': 1508446800, u'main': {u'temp_kf': 0, u'temp': 288.021, u'grnd_level': 1008.57, u'temp_max': 288.021, u'sea_level': 1015.99, u'humidity': 84, u'pressure': 1008.57, u'temp_min': 288.021}, u'wind': {u'speed': 5.01, u'deg': 176.003}}, {u'clouds': {u'all': 100}, u'rain': {u'3h': 0.71}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-20 00:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10n', u'description': u'light rain'}], u'dt': 1508457600, u'main': {u'temp_kf': 0, u'temp': 287.522, u'grnd_level': 1006.76, u'temp_max': 287.522, u'sea_level': 1014.16, u'humidity': 91, u'pressure': 1006.76, u'temp_min': 287.522}, u'wind': {u'speed': 6.46, u'deg': 171.001}}, {u'clouds': {u'all': 92}, u'rain': {u'3h': 1.18}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-20 03:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10n', u'description': u'light rain'}], u'dt': 1508468400, u'main': {u'temp_kf': 0, u'temp': 286.593, u'grnd_level': 1003.5, u'temp_max': 286.593, u'sea_level': 1010.92, u'humidity': 95, u'pressure': 1003.5, u'temp_min': 286.593}, u'wind': {u'speed': 7.52, u'deg': 165.002}}, {u'clouds': {u'all': 80}, u'rain': {u'3h': 2.39}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-20 06:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10n', u'description': u'light rain'}], u'dt': 1508479200, u'main': {u'temp_kf': 0, u'temp': 287.058, u'grnd_level': 1002.84, u'temp_max': 287.058, u'sea_level': 1010.25, u'humidity': 97, u'pressure': 1002.84, u'temp_min': 287.058}, u'wind': {u'speed': 4.81, u'deg': 230.002}}, {u'clouds': {u'all': 92}, u'rain': {u'3h': 0.51}, u'sys': {u'pod': u'd'}, u'dt_txt': u'2017-10-20 09:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10d', u'description': u'light rain'}], u'dt': 1508490000, u'main': {u'temp_kf': 0, u'temp': 287.242, u'grnd_level': 1005.93, u'temp_max': 287.242, u'sea_level': 1013.44, u'humidity': 97, u'pressure': 1005.93, u'temp_min': 287.242}, u'wind': {u'speed': 5.21, u'deg': 250.002}}, {u'clouds': {u'all': 92}, u'rain': {u'3h': 0.26}, u'sys': {u'pod': u'd'}, u'dt_txt': u'2017-10-20 12:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10d', u'description': u'light rain'}], u'dt': 1508500800, u'main': {u'temp_kf': 0, u'temp': 286.672, u'grnd_level': 1009.47, u'temp_max': 286.672, u'sea_level': 1016.89, u'humidity': 97, u'pressure': 1009.47, u'temp_min': 286.672}, u'wind': {u'speed': 6.58, u'deg': 248.01}}, {u'clouds': {u'all': 36}, u'rain': {}, u'sys': {u'pod': u'd'}, u'dt_txt': u'2017-10-20 15:00:00', u'weather': [{u'main': u'Clouds', u'id': 802, u'icon': u'03d', u'description': u'scattered clouds'}], u'dt': 1508511600, u'main': {u'temp_kf': 0, u'temp': 286.684, u'grnd_level': 1011.34, u'temp_max': 286.684, u'sea_level': 1018.76, u'humidity': 93, u'pressure': 1011.34, u'temp_min': 286.684}, u'wind': {u'speed': 5.82, u'deg': 241.005}}, {u'clouds': {u'all': 64}, u'rain': {}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-20 18:00:00', u'weather': [{u'main': u'Clouds', u'id': 803, u'icon': u'04n', u'description': u'broken clouds'}], u'dt': 1508522400, u'main': {u'temp_kf': 0, u'temp': 284.794, u'grnd_level': 1012.54, u'temp_max': 284.794, u'sea_level': 1019.97, u'humidity': 89, u'pressure': 1012.54, u'temp_min': 284.794}, u'wind': {u'speed': 4.66, u'deg': 225}}, {u'clouds': {u'all': 48}, u'rain': {}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-20 21:00:00', u'weather': [{u'main': u'Clouds', u'id': 802, u'icon': u'03n', u'description': u'scattered clouds'}], u'dt': 1508533200, u'main': {u'temp_kf': 0, u'temp': 285.463, u'grnd_level': 1011.27, u'temp_max': 285.463, u'sea_level': 1018.68, u'humidity': 87, u'pressure': 1011.27, u'temp_min': 285.463}, u'wind': {u'speed': 4.81, u'deg': 193.5}}, {u'clouds': {u'all': 92}, u'rain': {u'3h': 3.7}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-21 00:00:00', u'weather': [{u'main': u'Rain', u'id': 501, u'icon': u'10n', u'description': u'moderate rain'}], u'dt': 1508544000, u'main': {u'temp_kf': 0, u'temp': 286.098, u'grnd_level': 1008.63, u'temp_max': 286.098, u'sea_level': 1016.05, u'humidity': 96, u'pressure': 1008.63, u'temp_min': 286.098}, u'wind': {u'speed': 6.41, u'deg': 180.506}}, {u'clouds': {u'all': 100}, u'rain': {u'3h': 0.79}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-21 03:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10n', u'description': u'light rain'}], u'dt': 1508554800, u'main': {u'temp_kf': 0, u'temp': 287.942, u'grnd_level': 1006.54, u'temp_max': 287.942, u'sea_level': 1013.86, u'humidity': 97, u'pressure': 1006.54, u'temp_min': 287.942}, u'wind': {u'speed': 7.42, u'deg': 203.5}}, {u'clouds': {u'all': 68}, u'rain': {u'3h': 0.2}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-21 06:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10n', u'description': u'light rain'}], u'dt': 1508565600, u'main': {u'temp_kf': 0, u'temp': 286.731, u'grnd_level': 1005.61, u'temp_max': 286.731, u'sea_level': 1012.97, u'humidity': 95, u'pressure': 1005.61, u'temp_min': 286.731}, u'wind': {u'speed': 8.56, u'deg': 207.503}}, {u'clouds': {u'all': 92}, u'rain': {u'3h': 0.27}, u'sys': {u'pod': u'd'}, u'dt_txt': u'2017-10-21 09:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10d', u'description': u'light rain'}], u'dt': 1508576400, u'main': {u'temp_kf': 0, u'temp': 285.917, u'grnd_level': 1005.27, u'temp_max': 285.917, u'sea_level': 1012.65, u'humidity': 94, u'pressure': 1005.27, u'temp_min': 285.917}, u'wind': {u'speed': 9.57, u'deg': 208.001}}, {u'clouds': {u'all': 80}, u'rain': {u'3h': 0.080000000000002}, u'sys': {u'pod': u'd'}, u'dt_txt': u'2017-10-21 12:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10d', u'description': u'light rain'}], u'dt': 1508587200, u'main': {u'temp_kf': 0, u'temp': 286.747, u'grnd_level': 1004.28, u'temp_max': 286.747, u'sea_level': 1011.74, u'humidity': 83, u'pressure': 1004.28, u'temp_min': 286.747}, u'wind': {u'speed': 11.06, u'deg': 213.5}}, {u'clouds': {u'all': 68}, u'rain': {u'3h': 0.009999999999998}, u'sys': {u'pod': u'd'}, u'dt_txt': u'2017-10-21 15:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10d', u'description': u'light rain'}], u'dt': 1508598000, u'main': {u'temp_kf': 0, u'temp': 286.874, u'grnd_level': 1003.52, u'temp_max': 286.874, u'sea_level': 1010.97, u'humidity': 76, u'pressure': 1003.52, u'temp_min': 286.874}, u'wind': {u'speed': 10.92, u'deg': 222.001}}, {u'clouds': {u'all': 100}, u'rain': {u'3h': 1.46}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-21 18:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10n', u'description': u'light rain'}], u'dt': 1508608800, u'main': {u'temp_kf': 0, u'temp': 285.413, u'grnd_level': 1005.89, u'temp_max': 285.413, u'sea_level': 1013.37, u'humidity': 85, u'pressure': 1005.89, u'temp_min': 285.413}, u'wind': {u'speed': 9.45, u'deg': 245}}, {u'clouds': {u'all': 92}, u'rain': {u'3h': 0.030000000000001}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-21 21:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10n', u'description': u'light rain'}], u'dt': 1508619600, u'main': {u'temp_kf': 0, u'temp': 284.651, u'grnd_level': 1009.39, u'temp_max': 284.651, u'sea_level': 1016.97, u'humidity': 80, u'pressure': 1009.39, u'temp_min': 284.651}, u'wind': {u'speed': 8.52, u'deg': 258.503}}, {u'clouds': {u'all': 80}, u'rain': {u'3h': 0.009999999999998}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-22 00:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10n', u'description': u'light rain'}], u'dt': 1508630400, u'main': {u'temp_kf': 0, u'temp': 283.553, u'grnd_level': 1012.95, u'temp_max': 283.553, u'sea_level': 1020.44, u'humidity': 78, u'pressure': 1012.95, u'temp_min': 283.553}, u'wind': {u'speed': 7.96, u'deg': 268.004}}, {u'clouds': {u'all': 80}, u'rain': {u'3h': 0.020000000000003}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-22 03:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10n', u'description': u'light rain'}], u'dt': 1508641200, u'main': {u'temp_kf': 0, u'temp': 283.353, u'grnd_level': 1015.21, u'temp_max': 283.353, u'sea_level': 1022.87, u'humidity': 77, u'pressure': 1015.21, u'temp_min': 283.353}, u'wind': {u'speed': 7.41, u'deg': 276.501}}, {u'clouds': {u'all': 56}, u'rain': {}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-22 06:00:00', u'weather': [{u'main': u'Clouds', u'id': 803, u'icon': u'04n', u'description': u'broken clouds'}], u'dt': 1508652000, u'main': {u'temp_kf': 0, u'temp': 282.614, u'grnd_level': 1017.73, u'temp_max': 282.614, u'sea_level': 1025.39, u'humidity': 75, u'pressure': 1017.73, u'temp_min': 282.614}, u'wind': {u'speed': 7.32, u'deg': 276.001}}, {u'clouds': {u'all': 44}, u'rain': {}, u'sys': {u'pod': u'd'}, u'dt_txt': u'2017-10-22 09:00:00', u'weather': [{u'main': u'Clouds', u'id': 802, u'icon': u'03d', u'description': u'scattered clouds'}], u'dt': 1508662800, u'main': {u'temp_kf': 0, u'temp': 283.312, u'grnd_level': 1019.95, u'temp_max': 283.312, u'sea_level': 1027.51, u'humidity': 75, u'pressure': 1019.95, u'temp_min': 283.312}, u'wind': {u'speed': 7.01, u'deg': 277.001}}, {u'clouds': {u'all': 76}, u'rain': {}, u'sys': {u'pod': u'd'}, u'dt_txt': u'2017-10-22 12:00:00', u'weather': [{u'main': u'Clouds', u'id': 803, u'icon': u'04d', u'description': u'broken clouds'}], u'dt': 1508673600, u'main': {u'temp_kf': 0, u'temp': 284.522, u'grnd_level': 1021.19, u'temp_max': 284.522, u'sea_level': 1028.78, u'humidity': 73, u'pressure': 1021.19, u'temp_min': 284.522}, u'wind': {u'speed': 7.27, u'deg': 279}}, {u'clouds': {u'all': 64}, u'rain': {}, u'sys': {u'pod': u'd'}, u'dt_txt': u'2017-10-22 15:00:00', u'weather': [{u'main': u'Clouds', u'id': 803, u'icon': u'04d', u'description': u'broken clouds'}], u'dt': 1508684400, u'main': {u'temp_kf': 0, u'temp': 285.142, u'grnd_level': 1021.81, u'temp_max': 285.142, u'sea_level': 1029.33, u'humidity': 70, u'pressure': 1021.81, u'temp_min': 285.142}, u'wind': {u'speed': 6.81, u'deg': 278.501}}, {u'clouds': {u'all': 44}, u'rain': {}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-22 18:00:00', u'weather': [{u'main': u'Clouds', u'id': 802, u'icon': u'03n', u'description': u'scattered clouds'}], u'dt': 1508695200, u'main': {u'temp_kf': 0, u'temp': 284.851, u'grnd_level': 1022.71, u'temp_max': 284.851, u'sea_level': 1030.36, u'humidity': 70, u'pressure': 1022.71, u'temp_min': 284.851}, u'wind': {u'speed': 5.45, u'deg': 275.007}}, {u'clouds': {u'all': 20}, u'rain': {}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-22 21:00:00', u'weather': [{u'main': u'Clouds', u'id': 801, u'icon': u'02n', u'description': u'few clouds'}], u'dt': 1508706000, u'main': {u'temp_kf': 0, u'temp': 283.959, u'grnd_level': 1023.44, u'temp_max': 283.959, u'sea_level': 1031.06, u'humidity': 75, u'pressure': 1023.44, u'temp_min': 283.959}, u'wind': {u'speed': 4.46, u'deg': 259.003}}, {u'clouds': {u'all': 12}, u'rain': {}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-23 00:00:00', u'weather': [{u'main': u'Clouds', u'id': 801, u'icon': u'02n', u'description': u'few clouds'}], u'dt': 1508716800, u'main': {u'temp_kf': 0, u'temp': 283.685, u'grnd_level': 1022.79, u'temp_max': 283.685, u'sea_level': 1030.32, u'humidity': 84, u'pressure': 1022.79, u'temp_min': 283.685}, u'wind': {u'speed': 4.22, u'deg': 237.504}}, {u'clouds': {u'all': 80}, u'rain': {u'3h': 0.09}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-23 03:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10n', u'description': u'light rain'}], u'dt': 1508727600, u'main': {u'temp_kf': 0, u'temp': 284.436, u'grnd_level': 1020.92, u'temp_max': 284.436, u'sea_level': 1028.55, u'humidity': 92, u'pressure': 1020.92, u'temp_min': 284.436}, u'wind': {u'speed': 4.93, u'deg': 228.503}}, {u'clouds': {u'all': 100}, u'rain': {u'3h': 3.63}, u'sys': {u'pod': u'n'}, u'dt_txt': u'2017-10-23 06:00:00', u'weather': [{u'main': u'Rain', u'id': 501, u'icon': u'10n', u'description': u'moderate rain'}], u'dt': 1508738400, u'main': {u'temp_kf': 0, u'temp': 285.951, u'grnd_level': 1018.24, u'temp_max': 285.951, u'sea_level': 1025.72, u'humidity': 97, u'pressure': 1018.24, u'temp_min': 285.951}, u'wind': {u'speed': 6.27, u'deg': 213.001}}, {u'clouds': {u'all': 92}, u'rain': {u'3h': 3.49}, u'sys': {u'pod': u'd'}, u'dt_txt': u'2017-10-23 09:00:00', u'weather': [{u'main': u'Rain', u'id': 501, u'icon': u'10d', u'description': u'moderate rain'}], u'dt': 1508749200, u'main': {u'temp_kf': 0, u'temp': 287.682, u'grnd_level': 1016.75, u'temp_max': 287.682, u'sea_level': 1024.23, u'humidity': 96, u'pressure': 1016.75, u'temp_min': 287.682}, u'wind': {u'speed': 6.52, u'deg': 233.003}}, {u'clouds': {u'all': 92}, u'rain': {u'3h': 0.38}, u'sys': {u'pod': u'd'}, u'dt_txt': u'2017-10-23 12:00:00', u'weather': [{u'main': u'Rain', u'id': 500, u'icon': u'10d', u'description': u'light rain'}], u'dt': 1508760000, u'main': {u'temp_kf': 0, u'temp': 288.822, u'grnd_level': 1016.02, u'temp_max': 288.822, u'sea_level': 1023.48, u'humidity': 97, u'pressure': 1016.02, u'temp_min': 288.822}, u'wind': {u'speed': 5.21, u'deg': 230.013}}]

    return response


def scan_for_datetime(listing, date_time, field=None):
    """Recover the requested data point if it exists.

    """


def no_match(city, date_time):
    """No data found message handler.

    """
    return {
        "status": "error",
        "message": "?"
    }


def get_forecast(city, date, hour, field=None):
    """Record the data or a specific field in the weather data.
    """
    log = get_log('get_forecast')

    log.debug('Getting forecast for city:{} date:{} hour: {}'.format(
        city, date, hour
    ))

    data = forecast_data(city)
    date_time = to_datetime(date, hour)
    found = scan_for_datetime(data, date_time, field)
    if found:
        returned = found

    else:
        when = printable(date_time)
        returned = no_match(city, when)

    return jsonify(returned)
